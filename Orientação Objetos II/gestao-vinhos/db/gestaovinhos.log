/*C12*/SET SCHEMA PUBLIC
alter table avaliacao drop constraint FKglymdlw9iaxs2nfxcsj66terg
alter table avaliacao drop constraint FKlmwccwsx0bppfiricm17qsodg
alter table user_role drop constraint FKa68196081fvovjhkek5m97n3y
alter table user_role drop constraint FK859n2jvi8ivhui0rl0esws6o
alter table vinho drop constraint FK3xksahfa09ro5duka5332jr4i
drop table avaliacao if exists
drop table role if exists
drop table tipo_vinho if exists
drop table user if exists
drop table user_role if exists
drop table vinho if exists
create table avaliacao (id bigint generated by default as identity (start with 1), date_time timestamp not null, descricao varchar(255) not null, positivo boolean not null, user_id bigint not null, vinho_id bigint not null, primary key (id))
create table role (id bigint generated by default as identity (start with 1), name varchar(255), primary key (id))
create table tipo_vinho (id bigint generated by default as identity (start with 1), descricao varchar(255) not null, primary key (id))
create table user (id bigint generated by default as identity (start with 1), name varchar(255), password varchar(255), username varchar(255), primary key (id))
create table user_role (user_id bigint not null, role_id bigint not null, primary key (user_id, role_id))
create table vinho (id bigint generated by default as identity (start with 1), nome varchar(255) not null, nome_imagem varchar(255) not null, vinicola varchar(255) not null, tipo_id bigint not null, primary key (id))
alter table avaliacao add constraint FKglymdlw9iaxs2nfxcsj66terg foreign key (user_id) references user
alter table avaliacao add constraint FKlmwccwsx0bppfiricm17qsodg foreign key (vinho_id) references vinho
alter table user_role add constraint FKa68196081fvovjhkek5m97n3y foreign key (role_id) references role
alter table user_role add constraint FK859n2jvi8ivhui0rl0esws6o foreign key (user_id) references user
alter table vinho add constraint FK3xksahfa09ro5duka5332jr4i foreign key (tipo_id) references tipo_vinho
INSERT INTO ROLE VALUES(1,'Admin')
COMMIT
INSERT INTO ROLE VALUES(2,'User')
COMMIT
INSERT INTO USER VALUES(1,'Administrator','admin','admin@admin.com')
COMMIT
INSERT INTO USER_ROLE VALUES(1,1)
COMMIT
INSERT INTO TIPO_VINHO VALUES(1,'Seco')
COMMIT
INSERT INTO TIPO_VINHO VALUES(2,'Suave')
COMMIT
