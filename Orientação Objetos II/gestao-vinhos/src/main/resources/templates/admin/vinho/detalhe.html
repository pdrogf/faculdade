<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8"/>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous"/>
	<title>Vinhos</title>
</head>
<body>
<div th:include="fragments/menu"></div>
<div class="ui container" th:if="${error}">
	<div class="ui red message transition"><i class="close icon"></i><span th:text="${error}"/></div>
</div>
<div class="ui container" th:if="${success}">
	<div class="ui green message transition"><i class="close icon"></i><span th:text="${success}"/></div>
</div>
<div class="ui container detailContainer">
	<h2 class="ui header">
		<div class="content">Dados do vinho</div>
	</h2>
	<div class="ui stacked segments">
		<div class="ui left aligned segment">
			<a href="/admin/vinho" class="ui blue basic button">
				<i class="chevron left icon"></i>
				Voltar
			</a>
		</div>
		<div class="ui segment">
			<div class="ui grid">
				<form class="jumbotron" method="POST" enctype="multipart/form-data" th:object="${wine}" th:action="@{/admin/vinho/{id}(id=${wine.id})}">
					<div class="field">
						<div class="ui left labeled right icon input">
							<div class="ui label">
								Nome:
							</div>
							<input class="form-control" type="text" id="nome" th:field="*{nome}" placeholder="Nome do vinho" required="required"/>
							<i class="talk icon"></i>
						</div>
					</div>
					<div class="field">
						<div class="ui left labeled right icon input">
							<div class="ui label">
								Vinícola:
							</div>
							<input class="form-control" type="text"  id="vinicola" th:field="*{vinicola}" placeholder="Nome da vinícola" required="required"/>
							<i class="building icon"></i>
						</div>
					</div>
					<div class="field">
						<div class="ui left labeled right icon input">
							<div class="label">
								Tipo:
							</div>
							<select name="idTipo">
								<option th:each="type: ${types}" th:value="${type.id}" th:text="${type.descricao}" th:selected="(${type.id} == *{idTipo})" ></option>
							</select>
						</div>
					</div>
					<div class="field">
						<div class="ui left labeled right icon input">
							<div class="ui label">
								Imagem:
							</div>
							<input class="form-control" type="file" id="imagem" name="imagem" />
							<i class="file icon"></i>
						</div>
					</div>
					<br/>
					<div class="field">
						<input class="btn btn-primary btn-block" type="submit" id="cadastrar" value="Alterar"/>
					</div>
				</form>
				<div class="six wide column">
					<img class="ui image" th:src="@{ /images/{filename}(filename=${wine.nomeImagem}) }"/>
				</div>
			</div>
		</div>
		<div class="ui container segment" th:if="${avaliations}">
			<div id="titleContainer" class="ui items">
				<div class="item">
					<div class="content">
						<h3 class="jumbotron">Avaliações</h3>
					</div>
				</div>
			</div>
			<div class="ui divider clear"></div>
			<div class="ui divided items">
				<div class="item" th:each="avaliation: ${avaliations}">
					<div class="content">
						<div class="header">
							<span th:text="${avaliation.user.name}"></span>
							<span> - </span>
							<span th:text="${#dates.format(avaliation.dateTime, 'dd-MM-yyyy')}"></span>
						</div>
						<div class="meta" th:text="${avaliation.descricao}"></div>
					</div>
					<div class="content">
						<div>
							<i th:if="${avaliation.positivo}"></i>
							<i th:unless="${avaliation.positivo}"></i>
						</div>
					</div>
					<div class="row">
						<a class="ui right floated red labeled icon tiny button" th:href="@{ /admin/vinho/{vid}/avaliacao/{id}/delete(vid=${wine.id}, id=${avaliation.id}) }">
							Excluir
							<i class="trash icon"></i>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script src="/js/main.js" charset="utf-8"></script>
</body>
</html>
